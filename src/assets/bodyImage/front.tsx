import { FC, MouseEventHandler } from "react";
import { useFormContext } from "react-hook-form";

import { checkIfClickedInsideExistingCircle, getClickCoords } from '../../helpers';
import { IForm100FrontState } from "../../components";
import { IFCPropsWithReadonly } from "../../interfaces";

const content = <>
    <path d="M49.4851 10.531V11.4894H53.6891V10.531H49.4851Z" fill="black"/>
    <path d="M40.8271 11.4549L45.2222 11.4939L45.2125 12.4522L40.8175 12.4132L40.8271 11.4549Z" fill="black"/>
    <path d="M49.5488 12.5675H52.0967V13.5259H51.3323V14.2447H48.7844V13.2863H49.5488V12.5675Z" fill="black"/>
    <path d="M41.7459 14.0051H42.5102V13.2863H45.0581V14.2447H44.2938V14.9634H41.7459V14.0051Z" fill="black"/>
    <path d="M48.1052 50.711C47.993 50.4683 47.6928 50.3571 47.4347 50.4627C47.1766 50.5682 47.0583 50.8505 47.1706 51.0932C47.8776 52.6223 49.2315 53.5609 50.8237 53.8437C52.4062 54.1248 54.196 53.7558 55.819 52.7383C56.0532 52.5915 56.1165 52.294 55.9604 52.0738C55.8043 51.8536 55.4879 51.7941 55.2537 51.9409C53.8193 52.8402 52.2968 53.1301 51.0129 52.902C49.7387 52.6757 48.6721 51.9372 48.1052 50.711Z" fill="black"/>
    <path d="M34.6013 52.6278C34.4891 52.3851 34.1889 52.2739 33.9308 52.3794C33.6727 52.4849 33.5545 52.7672 33.6667 53.0099C34.3835 54.5602 35.8364 55.4201 37.4668 55.4542C39.086 55.488 40.8209 54.7106 42.1756 53.1182C42.3514 52.9115 42.3158 52.61 42.096 52.4446C41.8763 52.2793 41.5556 52.3128 41.3798 52.5195C40.1866 53.922 38.7366 54.5221 37.4894 54.4961C36.2535 54.4703 35.1584 53.8327 34.6013 52.6278Z" fill="black"/>
    <path d="M45.265 18.5423H45.918V17.7487H47.9882V18.707H47.5903V19.5007H45.265V18.5423Z" fill="black"/>
    <path d="M52.6381 48.7757V49.7341H51.5553V48.7757H52.6381Z" fill="black"/>
    <path d="M35.2487 49.7341V50.6925H36.3316V49.7341H35.2487Z" fill="black"/>
    <path d="M49.0444 20.7917C49.2273 20.9928 49.202 21.2953 48.9881 21.4672C48.0145 22.2496 47.0471 22.4891 46.1627 22.4269C45.3005 22.3662 44.566 22.0219 44.0336 21.7246C43.7916 21.5895 43.7119 21.2955 43.8556 21.068C43.9993 20.8404 44.3119 20.7655 44.5539 20.9006C45.0406 21.1723 45.6119 21.427 46.2387 21.4712C46.8432 21.5137 47.5479 21.364 48.326 20.7387C48.5399 20.5667 48.8616 20.5905 49.0444 20.7917Z" fill="black"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M32.098 71.0437C31.8984 69.095 31.5512 65.4414 31.3758 62.8038C30.9369 63.4735 30.3991 64.0448 29.8598 64.5981C29.7906 64.669 29.7214 64.7397 29.6524 64.8102C28.6575 65.8263 27.6842 66.8204 27.0969 68.3457C26.5465 69.7752 26.2968 71.2118 26.0414 72.6815C25.9957 72.9445 25.9498 73.2086 25.9019 73.4738C25.59 75.2036 25.197 76.9648 24.1968 78.6578C23.8449 79.2535 23.3832 80.0604 22.8528 80.9874L22.8519 80.989C22.2199 82.0936 21.5578 83.3835 20.8852 84.6936C19.7321 86.9399 18.5483 89.2461 17.4327 90.7816C17.4385 91.8874 17.508 93.0406 17.58 94.2354C17.8568 98.8297 17.6741 103.933 14.5508 109.453C14.2493 109.985 13.9425 110.455 13.6388 110.811C13.3544 111.144 12.999 111.467 12.5792 111.554C12.3437 111.604 12.0995 111.576 11.8771 111.455C11.6675 111.341 11.5129 111.164 11.396 110.97C11.3693 110.926 11.3436 110.879 11.3189 110.83C10.7939 111.881 10.0968 112.778 9.42255 113.264C8.965 113.593 8.28473 113.885 7.69129 113.485C7.4205 113.303 7.25206 113.02 7.1502 112.703C7.14002 112.671 7.13037 112.639 7.12124 112.606C6.86655 112.814 6.61374 112.975 6.36696 113.079C6.11296 113.186 5.83502 113.246 5.55594 113.207C5.26398 113.167 5.01724 113.026 4.83757 112.81C4.50609 112.411 4.42809 111.797 4.4925 111.11C4.52763 110.735 4.60811 110.308 4.73784 109.829C4.57369 109.921 4.41667 109.997 4.26736 110.057C3.80021 110.247 3.20148 110.359 2.76622 109.982C2.56036 109.803 2.4588 109.565 2.41586 109.327C2.37303 109.09 2.38207 108.822 2.4264 108.536C2.51506 107.964 2.75871 107.235 3.15355 106.36C3.41548 105.779 3.5995 105.368 3.74273 105.048L3.7439 105.046C3.90833 104.678 4.01898 104.431 4.13228 104.185C4.36535 103.679 4.60965 103.177 5.35647 101.643L5.37058 101.614C4.79498 101.886 4.24363 102.102 3.73629 102.262C2.85022 102.542 2.03599 102.672 1.45202 102.58C1.16063 102.534 0.830481 102.416 0.632544 102.134C0.422246 101.835 0.456911 101.492 0.577155 101.203C0.696105 100.917 0.922099 100.617 1.22787 100.305C1.53828 99.9884 1.95368 99.6369 2.48179 99.2507C5.84135 96.7935 8.4068 93.9688 11.2989 90.3244C11.563 89.0728 11.8267 87.6458 12.109 86.1188L12.1868 85.6982C12.5062 83.9716 12.8503 82.1321 13.2433 80.2995C14.0271 76.6441 15.0136 72.9741 16.4131 70.2503C17.241 68.639 18.1704 65.821 18.8937 62.7745C19.1647 61.6327 19.3451 60.4907 19.52 59.3834C19.7356 58.0182 19.9429 56.7059 20.3015 55.512C21.9223 48.3932 24.1936 38.6399 33.1364 33.1185L33.1268 33.1125C33.1844 33.0816 33.242 33.0503 33.2996 33.0187C34.016 32.5844 34.7747 32.1771 35.5787 31.8001L35.5983 31.7909C36.4284 31.3636 37.2192 30.954 37.9269 30.5407C39.02 29.9022 39.8114 29.3312 40.1843 28.8346C41.5606 25.8757 40.8195 22.2356 39.9274 20.1071C37.6995 19.3383 36.4776 17.5412 36.2402 15.8109C36.0146 14.1672 36.6845 12.4416 38.3881 11.8311C38.1984 4.78153 42.7377 1.00997 47.3696 0.962365C49.7063 0.938349 52.0233 1.87266 53.6656 3.77293C55.2483 5.60429 56.1749 8.29602 55.9474 11.8174C56.7299 12.0642 57.2688 12.5398 57.5515 13.1691C57.8724 13.8836 57.8329 14.728 57.5774 15.5345C57.0816 17.0991 55.7047 18.7366 53.8924 19.4573C53.2041 20.3929 52.9405 21.1392 52.8837 21.9416C52.8258 22.7593 52.9785 23.6504 53.1946 24.9122L53.237 25.1599C53.4419 26.3606 54.163 27.2556 55.2452 28.0874C56.0458 28.7028 56.9991 29.2526 58.0468 29.8569C58.4449 30.0865 58.8566 30.3239 59.2787 30.5758C62.3093 32.3844 65.6077 34.799 66.7984 39.8648C67.52 42.7754 68.6352 51.069 69.1007 54.8299C69.2425 55.9757 69.35 57.2774 69.4626 58.6412L69.5109 59.2254C69.6425 60.8067 69.7889 62.4609 70.0097 64.0779C70.4545 67.3344 71.192 70.3476 72.6416 72.2788C73.3025 73.1592 73.8874 74.5292 74.4033 76.1237C74.8719 77.5718 75.3233 79.2369 75.6761 80.9709L75.6807 80.9701L75.7517 81.3515C75.7641 81.4152 75.7763 81.4791 75.7884 81.5431C75.9736 82.4349 76.146 83.3397 76.3049 84.236C76.7246 86.3985 76.9022 87.4198 76.875 89.1241C76.8444 91.0397 77.3659 92.1017 78.2587 92.925C78.722 93.3523 79.3013 93.7296 80.0042 94.1256C80.4313 94.3662 80.8842 94.6032 81.375 94.8601C81.7034 95.032 82.0488 95.2127 82.4148 95.4094C82.931 95.6868 83.4676 96.1133 83.8598 96.5669C84.0564 96.7943 84.2294 97.043 84.3422 97.2973C84.4529 97.5468 84.5241 97.8438 84.4511 98.1425C84.3724 98.4643 84.1455 98.7119 83.8206 98.867C83.5139 99.0133 83.1222 99.0786 82.6636 99.0846C81.9586 99.0938 80.9937 98.9633 79.7073 98.6532C79.9847 99.0642 80.2262 99.4039 80.4423 99.7079L80.4436 99.7098C80.5813 99.9035 80.7087 100.083 80.8285 100.257C81.2786 100.91 81.6021 101.464 81.8849 102.334C81.9343 102.486 82.0056 102.688 82.0893 102.925L82.0896 102.926C82.4237 103.872 82.956 105.379 83.09 106.53C83.1328 106.896 83.1405 107.262 83.0748 107.582C83.0097 107.899 82.8573 108.239 82.5171 108.449C82.1722 108.661 81.7557 108.665 81.3406 108.562C81.121 108.507 80.883 108.418 80.6252 108.296C80.6823 108.677 80.7103 109.021 80.7113 109.329C80.7136 110.018 80.5807 110.624 80.2145 110.994C80.016 111.195 79.7574 111.317 79.4629 111.334C79.1814 111.349 78.9099 111.268 78.6664 111.141C78.4299 111.017 78.1924 110.838 77.9574 110.609C77.9453 110.642 77.9328 110.673 77.9198 110.704C77.7897 111.012 77.5964 111.281 77.3102 111.441C76.6829 111.792 76.0313 111.447 75.6051 111.082C74.977 110.544 74.3631 109.595 73.9347 108.506C73.9056 108.553 73.8758 108.597 73.8452 108.639C73.7113 108.823 73.5413 108.987 73.3222 109.084C73.0896 109.187 72.8439 109.195 72.6136 109.128C72.2032 109.007 71.8782 108.656 71.6248 108.302C71.3543 107.923 71.0908 107.431 70.8384 106.876C68.6134 101.986 68.8474 97.5152 69.3914 93.4843C68.9502 92.0234 68.2388 90.5099 67.4949 88.9275C66.0672 85.8905 64.5177 82.5943 64.5177 78.9043C64.5177 76.8861 63.6444 73.8606 62.5163 70.8485C61.3953 67.8552 60.049 64.9421 59.1532 63.178L59.1337 63.1396L59.1217 63.0986C59.0596 62.8864 59.0072 62.7012 58.9629 62.5387C58.4949 63.8407 58.0882 65.3995 57.8279 66.9753C57.4452 69.2928 57.3936 71.5643 57.872 73.0774C58.4431 74.8834 58.8839 76.1367 59.2945 77.3036L59.2949 77.3048C60.1685 79.7881 60.9049 81.8814 62.4657 88.078C63.6362 92.7256 63.1756 97.8817 62.2606 102.197C61.3452 106.515 59.9635 110.042 59.2446 111.456C58.5904 112.742 58.2812 114.612 58.2293 116.62C58.1777 118.616 58.3816 120.694 58.7126 122.362C59.3709 125.679 59.2772 128.161 59.178 130.788C59.1411 131.765 59.1034 132.763 59.1034 133.831C59.1034 134.892 58.8235 136.348 58.4359 137.945C58.1255 139.224 57.7381 140.623 57.3506 142.023C57.2516 142.38 57.1524 142.739 57.0546 143.094C56.5723 144.849 56.1208 146.557 55.8412 148.011C55.7015 148.738 55.6066 149.392 55.5712 149.951C55.5354 150.516 55.5628 150.953 55.6474 151.26C55.8441 151.973 56.0287 152.606 56.1955 153.177C56.5973 154.554 56.8959 155.577 57.0095 156.519C57.1768 157.906 56.9544 159.137 56.2139 161.108C56.1282 161.406 56.1122 161.835 56.1675 162.369C56.2228 162.902 56.345 163.502 56.5042 164.113C56.8228 165.335 57.2795 166.562 57.6015 167.314L57.6059 167.324L57.6098 167.335C57.7792 167.79 58.3267 169.042 59.0333 170.332C59.3859 170.976 59.7735 171.62 60.1687 172.175C60.3748 172.464 60.5194 172.654 60.773 172.939C61.062 173.264 61.4099 173.502 61.7307 173.721C62.0909 173.967 62.4169 174.19 62.5869 174.487C63.0793 175.347 63.2471 176.107 62.9391 176.657C62.79 176.924 62.5679 177.085 62.319 177.171C62.3412 177.194 62.361 177.214 62.3788 177.233L62.413 177.267C62.5106 177.366 62.5499 177.405 62.6639 177.569C62.8122 177.782 62.8616 178.035 62.766 178.454C62.6947 178.767 62.3785 178.952 62.1125 179.033C61.8464 179.113 61.6866 179.113 61.4835 179.113C61.5106 179.203 61.5589 179.297 61.6123 179.402C61.727 179.626 61.865 179.896 61.865 180.259C61.8071 180.775 61.715 180.97 61.304 181.27C60.9817 181.457 60.7046 181.557 60.3883 181.539C60.4161 181.742 60.4132 181.937 60.3771 182.12C60.2906 182.56 60.0141 182.914 59.5869 183.094C59.177 183.267 58.6942 183.254 58.2172 183.109C58.0437 183.057 57.8665 182.986 57.6872 182.897C57.6889 183.467 57.5809 183.974 57.3653 184.381C57.1899 184.712 56.9352 184.99 56.5978 185.162C56.2557 185.337 55.8661 185.383 55.4663 185.305C54.6921 185.155 53.8251 184.951 53.0756 183.954C52.6711 183.415 52.5744 182.12 52.4784 180.49C52.3823 178.859 50.8809 176.194 49.4662 174.497C47.6064 172.266 46.0059 169.955 46.7571 166.615C47.15 164.855 47.3249 162.244 47.3992 159.589C47.4588 157.458 47.4533 155.325 47.4488 153.618L47.4488 153.615C47.4478 153.203 47.4468 152.815 47.4468 152.459C47.4468 150.631 46.9177 147.833 46.3053 145.194C45.7972 143.005 45.2409 140.963 44.9059 139.733L44.9054 139.731L44.9051 139.73L44.904 139.726C44.8379 139.484 44.7805 139.273 44.7339 139.099C44.6078 138.63 44.5386 137.953 44.5026 137.195C44.4925 136.982 44.4849 136.76 44.4796 136.531C43.8903 137.679 42.8567 140.406 42.1573 143.586C41.4389 146.852 41.0918 150.516 41.8842 153.4C42.7343 155.776 42.8127 157.844 42.8525 160.215L42.86 160.683C42.8951 162.939 42.9352 165.522 43.5477 168.995C44.1474 170.684 44.3585 171.077 44.8323 171.959L44.8982 172.082C44.9418 172.163 44.9877 172.249 45.0362 172.34C45.244 172.731 45.3283 173.232 45.3348 173.744C45.3413 174.265 45.2676 174.84 45.1236 175.403C44.8418 176.506 44.2604 177.68 43.3519 178.302C42.8011 178.68 41.8978 179.628 41.1263 180.759C40.348 181.9 39.7712 183.111 39.7712 183.999C39.7724 184.605 39.7642 184.956 39.7109 185.484C39.6607 185.98 39.5135 186.434 39.1295 186.663C38.7146 186.911 38.2751 186.76 38.0257 186.633C37.9505 186.595 37.8772 186.551 37.8067 186.505C37.7399 186.88 37.6276 187.178 37.4639 187.402C37.3066 187.617 37.0972 187.77 36.8447 187.838C36.6008 187.904 36.365 187.879 36.1695 187.825C35.9624 187.768 35.7676 187.67 35.5987 187.564C35.5032 187.843 35.3626 188.072 35.1683 188.243C34.7602 188.603 34.2531 188.598 33.8589 188.491C33.5161 188.399 33.1029 188.154 32.9428 188.037C32.8462 188.221 32.7287 188.381 32.5901 188.515C32.2583 188.836 31.4122 189.019 30.9504 188.946C30.5076 188.876 29.9263 188.7 29.8025 188.243L29.7863 188.184C29.7388 188.011 29.7045 187.887 29.7064 187.658L29.7065 187.644C28.6363 188.605 27.267 188.817 26.1492 188.445C25.4516 188.213 24.8538 187.751 24.5224 187.112C24.1876 186.466 24.1461 185.679 24.4854 184.842C24.8641 183.909 25.3221 183.146 26.0346 182.142C26.1914 181.921 26.4476 181.638 26.7522 181.32C27.0156 181.046 27.3322 180.727 27.6816 180.376L27.8688 180.187C28.7201 179.331 29.7507 178.284 30.7613 177.124C32.8009 174.783 34.6709 172.076 34.8994 169.619C35.0876 165.413 34.5297 156.353 34.0748 153.121C33.7953 151.135 33.3631 149.808 32.8571 148.254L32.8506 148.234C32.339 146.663 31.7588 144.875 31.212 142.001C30.6601 139.101 30.6151 134.052 30.7264 129.26C30.8152 125.438 31.0049 121.742 31.1267 119.368L31.1268 119.366C31.1582 118.755 31.185 118.232 31.2045 117.817C31.295 115.888 30.5675 113.603 29.6364 111.284C29.3204 110.496 28.979 109.701 28.6436 108.92C28.0107 107.446 27.3992 106.021 27.0202 104.794C26.7133 103.8 26.5702 102.274 26.5432 100.523C26.516 98.7596 26.6066 96.7258 26.7868 94.6925C27.145 90.6502 27.8651 86.5226 28.7599 84.5281C29.6078 82.6382 30.5394 79.9673 31.2109 77.4045C31.8881 74.8196 32.278 72.4267 32.0996 71.056L32.098 71.0437ZM80.857 107.325C80.6117 107.116 80.3807 106.795 80.2369 106.488C79.9978 105.976 79.6012 105.157 79.2562 104.58C78.9165 104.013 78.3182 103.165 78.3182 103.165C78.3182 103.165 78.5485 104.36 78.7271 105.041C78.7894 105.279 78.8693 105.541 78.9542 105.798L79.2525 106.827C79.5622 107.895 79.6901 108.727 79.6922 109.332C79.6943 109.964 79.5589 110.25 79.4677 110.342C79.4375 110.373 79.4201 110.376 79.4019 110.377C79.3707 110.379 79.2927 110.371 79.1603 110.302C78.9054 110.17 78.2703 109.636 78.1742 109.341C77.9482 108.649 77.4496 107.165 77.0047 106.151C76.6012 105.232 75.8654 103.84 75.8654 103.84C75.8654 103.84 76.0981 105.418 76.2514 106.219C76.4717 107.369 76.915 108.782 77.1563 109.513C77.2641 109.839 77.1897 110.202 77.1241 110.357C77.0585 110.513 76.9437 110.598 76.8528 110.619C76.7982 110.631 76.6859 110.619 76.6188 110.6C76.5315 110.576 76.4603 110.518 76.2912 110.373C75.7267 109.89 75.09 108.86 74.708 107.661C74.6176 107.228 74.3515 105.999 74.0801 105.177C73.828 104.414 73.3256 103.258 73.3256 103.258C73.3256 103.258 73.3636 104.783 73.4162 105.759C73.4223 105.872 73.4334 105.985 73.4449 106.103C73.4662 106.321 73.489 106.555 73.4845 106.825C73.4749 107.395 73.42 107.619 73.3774 107.781C73.3348 107.943 73.0884 108.194 72.9991 108.209C72.7543 108.252 72.6197 108.09 72.4021 107.786C72.2389 107.558 72.1054 107.251 71.9488 106.892C71.8945 106.767 71.8374 106.636 71.7754 106.499C69.6731 101.879 69.8615 97.7175 70.3805 93.8117L70.3772 93.8079C70.3214 92.362 69.3975 90.3215 68.3715 88.0558C67.0401 85.1153 65.5369 81.7955 65.5369 78.9043C65.5369 76.7057 64.6055 73.5417 63.4776 70.5301C62.3508 67.5214 61.0012 64.5969 60.0924 62.8036C59.7375 61.5871 59.7401 61.4564 59.744 61.258C59.7462 61.1449 59.7489 61.0098 59.6861 60.6393C59.0725 57.0215 59.6823 52.2947 60.1128 49.5918L60.9149 46.7488L61.6268 44.6699L60.7036 44.2783C60.2571 44.9855 59.5933 46.3891 59.1091 49.4234C58.6849 52.0814 58.0526 56.8732 58.6557 60.645C57.8889 62.2288 57.201 64.5261 56.8208 66.8283C56.4317 69.1846 56.3506 71.6286 56.8951 73.3506C57.4784 75.1952 57.9238 76.4607 58.3357 77.631C59.2033 80.0964 59.9232 82.1418 61.4739 88.2989C62.5965 92.7558 62.1628 97.7574 61.2611 102.01C60.3599 106.26 59.0026 109.711 58.3252 111.042C57.5781 112.511 57.2635 114.543 57.2104 116.597C57.1571 118.663 57.3673 120.808 57.7107 122.538C58.347 125.743 58.2586 128.084 58.1607 130.675C58.1232 131.669 58.0843 132.7 58.0843 133.831C58.0843 134.773 57.83 136.135 57.4423 137.732C57.1357 138.995 56.7533 140.376 56.3662 141.774L56.3642 141.782L56.3635 141.784L56.3604 141.795L56.36 141.797C56.2625 142.149 56.1648 142.502 56.0679 142.855C55.586 144.608 55.1255 146.347 54.8383 147.841C54.6947 148.588 54.5925 149.283 54.5538 149.894C54.5155 150.499 54.5371 151.052 54.6609 151.501C54.8737 152.273 55.0671 152.935 55.2373 153.518C55.6249 154.846 55.8926 155.763 55.9969 156.627C56.1401 157.815 55.9667 158.892 55.2471 160.804L55.2415 160.819L55.2369 160.835C55.0969 161.303 55.0925 161.876 55.1532 162.462C55.2148 163.056 55.3482 163.704 55.5144 164.341C55.8452 165.611 56.3158 166.876 56.6518 167.662C56.8429 168.172 57.4073 169.457 58.1273 170.771C58.4905 171.434 58.8979 172.113 59.3219 172.708C59.3817 172.792 59.4423 172.875 59.5036 172.957C59.5284 173 59.685 173.195 59.82 173.333C59.9199 173.435 60.0907 173.58 60.0907 173.58L60.7704 174.06C60.7704 174.06 61.5195 174.644 61.6896 174.941C62.1544 175.753 62.0905 176.116 62.0372 176.211C62.021 176.24 61.93 176.353 61.5803 176.26L60.2491 175.909L60.9984 176.762L61.0758 176.833C61.5034 177.225 61.6721 177.38 61.7548 177.698C61.8424 178.035 61.4822 178.344 61.1099 178.267C60.8341 178.21 60.6457 178.127 60.4744 178.051C60.4144 178.024 60.3565 177.999 60.2977 177.975L59.1411 177.569C59.1411 177.569 59.7685 178.32 60.2055 178.773C60.2556 178.825 60.3055 178.875 60.3543 178.924C60.7133 179.286 61.0174 179.592 60.9817 180.139C60.9704 180.311 60.9022 180.423 60.7556 180.526C60.5976 180.638 60.4514 180.653 60.2579 180.614C60.1892 180.601 60.1456 180.58 60.0932 180.555C60.081 180.549 60.0682 180.543 60.0545 180.536L60.0327 180.526C59.8994 180.467 59.8132 180.414 59.7134 180.351C59.6926 180.338 59.6713 180.325 59.6489 180.311L59.6195 180.293L59.5995 180.281L59.5612 180.259C58.8053 179.818 57.6872 179.042 57.6872 179.042L59.198 181.105C59.3831 181.492 59.4089 181.773 59.3749 181.946C59.344 182.103 59.2661 182.179 59.1699 182.22C59.0563 182.268 58.8465 182.293 58.5293 182.197C58.2159 182.102 57.8291 181.897 57.4044 181.538L56.2618 180.572L56.564 181.988C56.7549 182.883 56.663 183.557 56.453 183.954C56.3505 184.147 56.2284 184.26 56.1119 184.32C56.0002 184.377 55.8587 184.403 55.6723 184.366C55.6279 184.358 55.5802 184.351 55.5294 184.343L55.4949 184.338C55.0902 184.281 54.5065 184.197 53.908 183.401C53.6567 183.066 53.5947 182.376 53.5245 181.596C53.4812 181.114 53.4348 180.598 53.3388 180.109L53.3256 180.041L53.3136 179.979C53.2956 179.885 53.2803 179.806 53.2555 179.691C52.7204 177.231 51.6442 175.557 50.2683 173.906C48.4337 171.705 47.1044 169.702 47.7544 166.813C48.1682 164.959 48.3437 162.27 48.418 159.614C48.478 157.468 48.4724 155.318 48.468 153.611L48.468 153.606C48.4669 153.196 48.4659 152.811 48.4659 152.459C48.4659 150.515 47.9122 147.623 47.301 144.99C46.7886 142.782 46.2266 140.719 45.892 139.491L45.891 139.487C45.8251 139.245 45.7681 139.036 45.722 138.864C45.623 138.495 45.5563 137.902 45.5207 137.153C45.4856 136.413 45.482 135.552 45.4983 134.664C45.5308 132.894 45.6423 131.038 45.7353 129.867C46.1795 126.25 46.6824 118.142 46.6824 114.963C46.6824 112.017 46.4002 110.17 45.9474 107.207C45.7862 106.153 45.6035 104.957 45.4042 103.52C45.026 100.794 45.0268 99.2486 45.0816 97.8496C45.0908 97.6163 45.1016 97.3852 45.1124 97.1531L45.1125 97.15C45.167 95.981 45.2234 94.7712 45.0887 92.9471L44.0741 92.9261C43.9381 94.0493 43.7506 95.536 43.5463 97.1556C43.0202 101.328 42.3824 106.384 42.2249 108.399C42.0606 110.501 42.4979 113.688 43.0207 116.561C43.4915 119.149 44.0413 121.532 44.3166 122.725L44.3168 122.726L44.3867 123.029L44.4007 123.09C44.7164 124.469 44.9049 126.91 44.7201 129.78C44.6595 130.272 44.6049 130.728 44.5542 131.151C44.4195 132.274 44.3128 133.164 44.197 133.892C44.0368 134.899 43.867 135.538 43.615 136.012C42.9847 137.198 41.8899 140.07 41.1592 143.392C40.4298 146.708 40.0444 150.555 40.9023 153.658L40.9069 153.674L40.9127 153.69C41.7132 155.92 41.7937 157.86 41.8335 160.231L41.841 160.701C41.8761 162.969 41.9173 165.625 42.549 169.189L42.5556 169.226L42.5682 169.262C43.2001 171.045 43.4311 171.475 43.9241 172.394C43.9863 172.51 44.0527 172.634 44.1246 172.769C44.2352 172.977 44.3101 173.314 44.3157 173.756C44.3211 174.188 44.2594 174.683 44.1327 175.179C43.8731 176.195 43.3716 177.103 42.7514 177.528C42.0563 178.005 41.0725 179.063 40.2685 180.242C39.5046 181.361 38.8118 183.085 38.8118 183.886C38.8175 184.868 38.8303 185.042 38.8487 185.292L38.8516 185.331C38.8636 185.496 38.8436 185.743 38.7202 185.792C38.5968 185.841 38.4774 185.829 38.3938 185.758C38.293 185.672 38.2334 185.617 38.1445 185.535L38.1414 185.533L38.1375 185.529C38.1103 185.504 38.0803 185.476 38.0456 185.444C37.9723 185.377 37.9078 185.313 37.8559 185.261L37.8309 185.235L37.8098 185.214L37.7839 185.188C37.7597 185.164 37.736 185.141 37.7188 185.126L36.8611 184.381L36.8635 185.479C36.8655 186.333 36.7302 186.714 36.6242 186.859C36.6016 186.89 36.5846 186.904 36.5764 186.91C36.5689 186.915 36.5648 186.916 36.5623 186.917C36.5568 186.919 36.5262 186.925 36.4554 186.906C36.2985 186.862 36.1002 186.737 35.9142 186.585C35.8277 186.514 35.7551 186.447 35.7044 186.397C35.6906 186.384 35.6786 186.372 35.6685 186.361L35.6473 186.34L35.634 186.326L35.6319 186.324L34.7977 185.413L34.7369 186.614C34.7052 187.239 34.5538 187.471 34.4711 187.544C34.4212 187.588 34.3389 187.624 34.1403 187.57C33.9347 187.515 33.6976 187.382 33.49 187.223C33.3895 187.147 33.3055 187.072 33.245 187.01C33.2026 186.966 33.1819 186.94 33.1745 186.93L33.1724 186.928L33.1711 186.926L32.4839 185.522L32.2093 187.055C32.1342 187.474 31.99 187.721 31.8595 187.847C31.7411 187.961 31.5747 188.034 31.4427 188.037C30.9126 188.051 30.6943 188.037 30.4793 187.731C30.3974 187.556 30.4077 187.443 30.4377 187.114C30.4469 187.013 30.4685 186.735 30.4793 186.585L30.6008 185.126L29.6035 186.234C28.6135 187.402 27.417 187.85 26.4891 187.541C26.0161 187.384 25.6406 187.082 25.4386 186.692C25.2399 186.309 25.1878 185.8 25.4377 185.184C25.7792 184.342 26.1932 183.645 26.8825 182.673C26.9932 182.517 27.2024 182.282 27.5092 181.962C27.7668 181.693 28.0771 181.381 28.4285 181.028L28.6135 180.842C29.466 179.984 30.5163 178.918 31.5496 177.732C33.595 175.384 35.6623 172.471 35.9157 169.69L35.9167 169.68L35.9171 169.67C36.1097 165.405 35.5471 156.277 35.0851 152.995C34.7945 150.93 34.3418 149.54 33.8357 147.986L33.8251 147.953C33.3175 146.395 32.7512 144.649 32.2152 141.832C31.6842 139.042 31.6336 134.089 31.7453 129.281C31.8337 125.474 32.0225 121.796 32.1444 119.42C32.1759 118.806 32.203 118.279 32.2227 117.859C32.3232 115.715 31.522 113.267 30.5899 110.945C30.2526 110.105 29.8995 109.283 29.5594 108.491C28.941 107.052 28.3645 105.711 27.9989 104.527C27.7326 103.664 27.589 102.248 27.5623 100.509C27.5357 98.7837 27.6243 96.7819 27.8024 94.7721C28.1608 90.7282 28.8739 86.7396 29.6989 84.9006C30.5709 82.9571 31.5183 80.2372 32.2004 77.6338C32.8758 75.056 33.3137 72.5107 33.112 70.9458C32.8348 68.2387 32.2874 62.3841 32.2869 60.3988C32.3082 58.7719 32.2698 56.2551 32.0847 53.9832C31.9923 52.8476 31.8623 51.762 31.6818 50.8753C31.5917 50.4322 31.487 50.029 31.3641 49.6896C31.2444 49.359 31.094 49.0496 30.8924 48.8256L30.1143 49.4446C30.193 49.532 30.2939 49.7071 30.3993 49.9984C30.5015 50.2809 30.5957 50.6371 30.6808 51.0554C30.851 51.8915 30.9774 52.9368 31.0686 54.0564C31.2507 56.2934 31.2888 58.7823 31.2677 60.39L31.2677 60.4163C30.9995 61.9215 30.1451 62.8871 29.1085 63.9505C29.0353 64.0255 28.9613 64.101 28.8865 64.1773C27.9016 65.1815 26.7981 66.3066 26.1386 68.0195C25.5531 69.54 25.2869 71.0753 25.0324 72.5434C24.9875 72.8024 24.943 73.0593 24.8971 73.3136C24.588 75.0279 24.2166 76.651 23.3059 78.1924C22.94 78.8117 22.4661 79.6399 21.9259 80.5839L21.9254 80.5848L21.9246 80.5863C21.2831 81.7073 20.6154 83.0066 19.9411 84.3188C18.7844 86.5698 17.6082 88.8585 16.5118 90.3495C16.4498 90.4289 16.4131 90.5269 16.4131 90.633C16.4131 91.8712 16.4879 93.1319 16.5641 94.4171C16.8348 98.9807 16.6269 103.744 13.651 109.002C13.5769 109.133 13.5083 109.259 13.4429 109.379C13.2546 109.725 13.0939 110.02 12.9108 110.235C12.6665 110.521 12.5179 110.671 12.2778 110.609C12.1902 110.586 11.9672 110.317 11.9394 110.152C11.9115 109.987 11.8771 109.759 11.9187 109.191C11.9385 108.921 11.9823 108.69 12.0231 108.475C12.0453 108.358 12.0665 108.246 12.0827 108.134C12.223 107.166 12.3982 105.649 12.3982 105.649C12.3982 105.649 11.7934 106.761 11.4736 107.502C11.1292 108.299 10.7534 109.503 10.6243 109.927C10.1359 111.091 9.40872 112.066 8.80269 112.503C8.62122 112.634 8.54497 112.686 8.45591 112.703C8.3873 112.716 8.27425 112.72 8.22102 112.703C8.13231 112.675 8.02557 112.581 7.9742 112.421C7.92283 112.261 7.88137 111.893 8.01814 111.577C8.3244 110.868 8.89329 109.496 9.2163 108.367C9.44118 107.581 9.8151 106.027 9.8151 106.027C9.8151 106.027 8.95666 107.355 8.47184 108.239C7.93731 109.214 7.30694 110.653 7.01941 111.325C6.89712 111.611 6.21624 112.092 5.95031 112.204C5.81217 112.262 5.7338 112.263 5.70284 112.259C5.68477 112.256 5.66775 112.252 5.64041 112.219C5.55785 112.12 5.44873 111.824 5.50773 111.194C5.5642 110.592 5.76655 109.773 6.17133 108.733L6.56111 107.733C6.66884 107.482 6.772 107.228 6.85551 106.996C7.09481 106.331 7.43188 105.159 7.43188 105.159C7.43188 105.159 6.75935 105.956 6.36982 106.495C5.97421 107.042 5.50522 107.827 5.22096 108.317C4.99601 108.705 4.61847 109.105 4.27974 109.243C4.0131 109.351 3.62286 109.433 3.45321 109.27C3.21173 109.038 3.24111 108.733 3.30835 108.536C3.47774 108.04 3.60487 107.772 3.79063 107.381C3.87553 107.203 3.97269 106.998 4.09177 106.734C4.35502 106.151 4.5391 105.739 4.68205 105.42C4.84426 105.058 4.95351 104.813 5.06537 104.57C5.29598 104.069 5.53774 103.573 6.27771 102.053L6.2892 102.03C6.47622 101.646 6.69479 101.197 6.9526 100.667L7.667 99.1985L6.21648 100.063C5.20423 100.666 4.23181 101.094 3.41164 101.354C2.57179 101.619 1.95268 101.687 1.62089 101.635C1.5664 101.626 1.52992 101.616 1.50645 101.608C1.5104 101.594 1.51659 101.575 1.52621 101.552C1.57945 101.424 1.7113 101.226 1.97715 100.955C2.23835 100.688 2.60833 100.372 3.1075 100.007C6.60071 97.4523 12.1902 91.0279 12.2738 90.633L12.2895 90.5591C12.306 90.482 12.3197 90.4179 12.3295 90.3637C12.5858 89.1358 12.8419 87.75 13.1127 86.2852L13.1908 85.8625C13.5103 84.1357 13.8523 82.3076 14.2423 80.489C15.0244 76.8419 15.9913 73.2743 17.3308 70.6672C18.2095 68.9569 19.1592 66.0546 19.8883 62.9833C20.1637 61.8235 20.349 60.691 20.5339 59.5606C20.649 58.8564 20.7641 58.1531 20.9007 57.4444L20.9687 57.1512C21.0618 56.7502 21.1555 56.3398 21.2509 55.9221L21.252 55.9174C22.9354 48.5455 25.168 38.7688 34.3668 33.5212C34.4764 33.4711 34.5855 33.4212 34.6752 33.3746C34.9249 33.2447 35.1764 33.1148 35.4277 32.985L35.4338 32.9819C36.5227 32.4424 37.5657 31.9033 38.4646 31.3548C39.5744 30.7066 40.5556 30.0311 41.0535 29.3374L41.0786 29.3025L41.0968 29.264C42.7083 25.8545 41.7617 21.7496 40.783 19.541L40.6928 19.3373L40.4695 19.2694C38.5109 18.6735 37.4514 17.1492 37.251 15.6883C37.0475 14.2055 37.7206 12.952 39.0349 12.6431L39.4398 12.5479L39.4204 12.1559C39.0809 5.30715 43.3503 1.96209 47.3807 1.92067C49.4152 1.89976 51.4336 2.70998 52.8747 4.37736C54.3158 6.04488 55.2113 8.60935 54.9011 12.1387L54.8637 12.5643L55.309 12.6481C56.0385 12.7853 56.4257 13.1259 56.6126 13.542C56.8112 13.9842 56.8148 14.5849 56.6006 15.2609C56.1701 16.6195 54.9326 18.051 53.377 18.6198L53.2354 18.6716L53.1471 18.7879C52.3057 19.8956 51.9405 20.8366 51.8668 21.8779C51.8009 22.8094 51.9724 23.8077 52.1806 25.0195L52.2307 25.3118C52.4896 26.829 53.4098 27.9144 54.6002 28.8294C55.4583 29.489 56.5003 30.0899 57.5704 30.707C57.9566 30.9297 58.3464 31.1546 58.7326 31.385C61.68 33.1438 64.7009 35.3783 65.8038 40.0741L65.8052 40.0796C66.5105 42.9219 67.6198 51.1557 68.0884 54.9407C68.2278 56.0673 68.3336 57.348 68.4464 58.7152L68.4949 59.3002C68.6265 60.882 68.7745 62.5572 68.9988 64.1999C69.4445 67.4627 70.2012 70.6896 71.809 72.8315C72.3711 73.5803 72.9183 74.8265 73.4283 76.4027C73.9297 77.9522 74.382 79.7777 74.777 81.6733C74.95 82.5999 75.0999 83.3708 75.2284 84.0312C75.2539 84.1622 75.2786 84.2895 75.3024 84.4122C75.4814 85.4254 75.6428 86.4278 75.7854 87.3879C75.7882 87.3879 75.7909 87.3879 75.7937 87.3878C75.8469 87.9327 75.8662 88.4664 75.856 89.1097C75.8221 91.2335 76.4154 92.5674 77.5451 93.6093C78.0931 94.1146 78.7521 94.5373 79.4804 94.9477C79.917 95.1936 80.3982 95.4456 80.9038 95.7103C81.2305 95.8814 81.5674 96.0579 81.9091 96.2415C82.3151 96.4596 82.7553 96.8087 83.069 97.1715C83.2253 97.3523 83.3376 97.522 83.4017 97.6663C83.4678 97.8154 83.4652 97.8974 83.4578 97.9279L83.4575 97.9292C83.4555 97.9385 83.4488 97.9696 83.3593 98.0124C83.2468 98.0661 83.0298 98.1213 82.6494 98.1263C81.8899 98.1363 80.6505 97.9456 78.7423 97.4033L77.4917 97.0478L78.1561 98.1056C78.7546 99.0585 79.2301 99.7273 79.6073 100.258C79.7412 100.446 79.8628 100.618 79.9731 100.778C80.3899 101.383 80.6634 101.855 80.9103 102.614C80.9714 102.802 81.0535 103.036 81.1462 103.299C81.482 104.252 81.9564 105.599 82.0769 106.634C82.1146 106.957 82.1122 107.215 82.0741 107.4C82.0354 107.589 81.975 107.637 81.9588 107.647C81.9473 107.654 81.8639 107.701 81.6016 107.635C81.4137 107.588 81.1686 107.492 80.857 107.325ZM44.1012 100.911C43.7127 104.034 43.3535 107.034 43.2413 108.469C43.0872 110.44 43.5012 113.519 44.0252 116.4C44.4922 118.967 45.0373 121.329 45.3127 122.522L45.3318 122.605C45.5259 119.607 45.6632 116.608 45.6632 114.963C45.6632 112.09 45.3933 110.323 44.9452 107.39C44.7832 106.33 44.5978 105.117 44.3936 103.644C44.2458 102.579 44.1545 101.687 44.1012 100.911Z" fill="black"/>
    </>

export const BodyImageFront: FC<IFCPropsWithReadonly> = ({ readonly }) => {
    const { watch, setValue } = useFormContext<IForm100FrontState>();

    const coords = watch('bodyImage.front') ?? [];

    const updateCircles = (event: MouseEvent) => {
        if (readonly) {
            return;
        }
        const [newCircleX, newCircleY] = getClickCoords(event);
    
        const removedCircleIdx = coords.findIndex(({ x, y }) => {
            return checkIfClickedInsideExistingCircle(newCircleX, x, 10) && checkIfClickedInsideExistingCircle(newCircleY, y, 10);
        });
    
        if (removedCircleIdx > -1) {
            setValue('bodyImage.front',[...coords.slice(0, removedCircleIdx), ...coords.slice(removedCircleIdx + 1)]);
            return;
        }
        setValue('bodyImage.front', [...coords, {x: newCircleX, y: newCircleY}]);
    };
    
    return (
        <svg width="100" height="200" viewBox="0 0 85 189" fill="none" xmlns="http://www.w3.org/2000/svg" onClick={updateCircles as unknown as MouseEventHandler<SVGSVGElement>}>
            {content}
            {coords.map(({ x, y }) => 
                <circle
                    key={x + y}
                    cx={x}
                    cy={y}
                    r="10"
                    stroke="red"
                    strokeWidth="3"
                />)}
        </svg>
    );
}